(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06483aa9"],{"008a":function(s,t,a){"use strict";a.r(t);var i=function(){var s=this,t=s._self._c;return t("div",[0==s.loads?t("div",{staticClass:"mask opacity",on:{touchmove:function(s){s.preventDefault()}}},[s._v(" ")]):s._e(),s.disphours?t("div",{staticClass:"mask opacity",on:{click:s.closeme}},[s._v(" ")]):s._e(),t("b-container",{attrs:{fluid:"xs"}},[t("div",{staticClass:"boxw devbox1"},[t("div",{staticClass:"cheader li1",class:s.loading?"hasnet":"nonet"},[t("div",[s.mynickname?s._e():t("span",[s._v(s._s(s._f("trans")("ChargerID:")))]),s._v(" #"+s._s(s.chargerid)+" ")]),0==s.contentId?t("div",[s.mytoken?t("span",{staticClass:"text-right"},[t("b-button",{staticClass:"btn btn-sm mybtn",attrs:{variant:"outline-success"},on:{click:s.inputpays}},[s._v(s._s(s._f("trans")("topup")))]),s._v(" "+s._s(s.mybalance)+" ")],1):s._e()]):t("div",[s.mytoken?t("span",{staticClass:"text-right"},[t("b-button",{staticClass:"btn btn-sm mybtn",attrs:{variant:"outline-warning"},on:{click:s.dologout}},[s._v(s._s(s._f("trans")("logout")))]),s._v(" ")],1):s._e()])]),0==s.contentId?[t("div",{staticClass:"weui-panel"},[t("div",{staticClass:"weui-flex acenter"},[t("div",{staticClass:"bdright"},[t("div",{staticClass:"pbox",class:0==s.portid?"p1":"p0",attrs:{id:"0"},on:{click:function(t){return s.selectme(t)}}},[t("div",{staticClass:"xn-ama w-ama"},[t("div",{staticClass:"xn-amb w-amb",class:0==s.portid?"d1 bg"+s.sw[0]:"d0 bg"+s.sw[0]},[t("div",{staticClass:"fixed",class:"fg"+s.sw[0]},[s._v(s._s(s.chargerid?"1":"-"))])]),t("div",{staticClass:"tinyst"},[s._v(s._s(s._f("trans")(s.st[s.sw[0]])))])])]),t("div",{staticClass:"pbox",class:4==s.portid?"p1":"p0",attrs:{id:"4"},on:{click:function(t){return s.selectme(t)}}},[t("div",{staticClass:"xn-ama w-ama"},[t("div",{staticClass:"xn-amb w-amb",class:4==s.portid?"d1 bg"+s.sw[4]:"d0 bg"+s.sw[4]},[t("div",{staticClass:"fixed",class:"fg"+s.sw[4]},[s._v(s._s(s.chargerid?"5":"-"))])]),t("div",{staticClass:"tinyst"},[s._v(s._s(s._f("trans")(s.st[s.sw[4]])))])])]),t("div",{staticClass:"pbox",class:8==s.portid?"p1":"p0",attrs:{id:"8"},on:{click:function(t){return s.selectme(t)}}},[t("div",{staticClass:"xn-ama w-ama"},[t("div",{staticClass:"xn-amb w-amb",class:8==s.portid?"d1 bg"+s.sw[8]:"d0 bg"+s.sw[8]},[t("div",{staticClass:"fixed",class:"fg"+s.sw[8]},[s._v(s._s(s.chargerid?"9":"-"))])]),t("div",{staticClass:"tinyst"},[s._v(s._s(s._f("trans")(s.st[s.sw[8]])))])])])]),t("div",{staticClass:"bdright"},[t("div",{staticClass:"pbox",class:1==s.portid?"p1":"p0",attrs:{id:"1"},on:{click:function(t){return s.selectme(t)}}},[t("div",{staticClass:"xn-ama w-ama"},[t("div",{staticClass:"xn-amb w-amb",class:1==s.portid?"d1 bg"+s.sw[1]:"d0 bg"+s.sw[1]},[t("div",{staticClass:"fixed",class:"fg"+s.sw[1]},[s._v(s._s(s.chargerid?"2":"-"))])]),t("div",{staticClass:"tinyst"},[s._v(s._s(s._f("trans")(s.st[s.sw[1]])))])])]),t("div",{staticClass:"pbox",class:5==s.portid?"p1":"p0",attrs:{id:"5"},on:{click:function(t){return s.selectme(t)}}},[t("div",{staticClass:"xn-ama w-ama"},[t("div",{staticClass:"xn-amb w-amb",class:5==s.portid?"d1 bg"+s.sw[5]:"d0 bg"+s.sw[5]},[t("div",{staticClass:"fixed",class:"fg"+s.sw[5]},[s._v(s._s(s.chargerid?"6":"-"))])]),t("div",{staticClass:"tinyst"},[s._v(s._s(s._f("trans")(s.st[s.sw[5]])))])])]),t("div",{staticClass:"pbox",class:9==s.portid?"p1":"p0",attrs:{id:"9"},on:{click:function(t){return s.selectme(t)}}},[t("div",{staticClass:"xn-ama w-ama"},[t("div",{staticClass:"xn-amb w-amb",class:9==s.portid?"d1 bg"+s.sw[9]:"d0 bg"+s.sw[9]},[t("div",{staticClass:"fixed",class:"fg"+s.sw[9]},[s._v(s._s(s.chargerid?"10":"-"))])]),t("div",{staticClass:"tinyst"},[s._v(s._s(s._f("trans")(s.st[s.sw[9]])))])])])]),t("div",{staticClass:"bdright"},[t("div",{staticClass:"pbox",class:2==s.portid?"p1":"p0",attrs:{id:"2"},on:{click:function(t){return s.selectme(t)}}},[t("div",{staticClass:"xn-ama w-ama"},[t("div",{staticClass:"xn-amb w-amb",class:2==s.portid?"d1 bg"+s.sw[2]:"d0 bg"+s.sw[2]},[t("div",{staticClass:"fixed",class:"fg"+s.sw[2]},[s._v(s._s(s.chargerid?"3":"-"))])]),t("div",{staticClass:"tinyst"},[s._v(s._s(s._f("trans")(s.st[s.sw[2]])))])])]),t("div",{staticClass:"pbox",class:6==s.portid?"p1":"p0",attrs:{id:"6"},on:{click:function(t){return s.selectme(t)}}},[t("div",{staticClass:"xn-ama w-ama"},[t("div",{staticClass:"xn-amb w-amb",class:6==s.portid?"d1 bg"+s.sw[6]:"d0 bg"+s.sw[6]},[t("div",{staticClass:"fixed",class:"fg"+s.sw[6]},[s._v(s._s(s.chargerid?"7":"-"))])]),t("div",{staticClass:"tinyst"},[s._v(s._s(s._f("trans")(s.st[s.sw[6]])))])])]),t("div",{staticClass:"pbox",class:10==s.portid?"p1":"p0",attrs:{id:"10"},on:{click:function(t){return s.selectme(t)}}},[t("div",{staticClass:"xn-ama w-ama"},[t("div",{staticClass:"xn-amb w-amb",class:10==s.portid?"d1 bg"+s.sw[10]:"d0 bg"+s.sw[10]},[t("div",{staticClass:"fixed",class:"fg"+s.sw[10]},[s._v(s._s(s.chargerid?"11":"-"))])]),t("div",{staticClass:"tinyst"},[s._v(s._s(s._f("trans")(s.st[s.sw[10]])))])])])]),t("div",{staticClass:"weui-flex__item"},[t("div",{staticClass:"pbox",class:3==s.portid?"p1":"p0",attrs:{id:"3"},on:{click:function(t){return s.selectme(t)}}},[t("div",{staticClass:"xn-ama w-ama"},[t("div",{staticClass:"xn-amb w-amb",class:3==s.portid?"d1 bg"+s.sw[3]:"d0 bg"+s.sw[3]},[t("div",{staticClass:"fixed",class:"fg"+s.sw[3]},[s._v(s._s(s.chargerid?"4":"-"))])]),t("div",{staticClass:"tinyst"},[s._v(s._s(s._f("trans")(s.st[s.sw[3]])))])])]),t("div",{staticClass:"pbox",class:7==s.portid?"p1":"p0",attrs:{id:"7"},on:{click:function(t){return s.selectme(t)}}},[t("div",{staticClass:"xn-ama w-ama"},[t("div",{staticClass:"xn-amb w-amb",class:7==s.portid?"d1 bg"+s.sw[7]:"d0 bg"+s.sw[7]},[t("div",{staticClass:"fixed",class:"fg"+s.sw[7]},[s._v(s._s(s.chargerid?"8":"-"))])]),t("div",{staticClass:"tinyst"},[s._v(s._s(s._f("trans")(s.st[s.sw[7]])))])])]),t("div",{staticClass:"pbox",class:11==s.portid?"p1":"p0",attrs:{id:"11"},on:{click:function(t){return s.selectme(t)}}},[t("div",{staticClass:"xn-ama w-ama"},[t("div",{staticClass:"xn-amb w-amb",class:11==s.portid?"d1 bg"+s.sw[11]:"d0 bg"+s.sw[11]},[t("div",{staticClass:"fixed",class:"fg"+s.sw[11]},[s._v(s._s(s.chargerid?"12":"-"))])]),t("div",{staticClass:"tinyst"},[s._v(s._s(s._f("trans")(s.st[s.sw[11]])))])])])])])]),t("b-button",{staticClass:"mainbtn mt-3",attrs:{block:"",variant:"outline-info"},on:{click:s.showhours}},[s._v(s._s(s._f("trans")("ChargeTIME"))+": "+s._s(s.thehours[s.hourid])+s._s(s._f("trans")("hors")))]),s.mytoken?s._e():t("b-button",{staticClass:"mainbtn mt-3",attrs:{block:"",variant:"info",to:{path:"/login",query:{backid:s.chargerid}}}},[s._v(s._s(s._f("trans")("btn_login")))]),s.mytoken&&s.mybalnum<10?t("b-button",{staticClass:"mainbtn mt-3",attrs:{block:"",variant:"primary"},on:{click:s.inputpays}},[s._v(s._s(s._f("trans")("btn_prepay")))]):s._e(),s.mytoken&&s.mybalnum>=10?t("b-button",{staticClass:"mainbtn mt-3",attrs:{block:"",variant:"success",disabled:s.noclick},on:{click:s.dochargebk}},[s._v(s._s(s.btntext))]):s._e(),s.disphours?t("div",{staticClass:"mypicker pickw"},[t("div",{staticClass:"weui-media-box"},[t("div",{staticClass:"mypanel fs1"},[s._v(" "+s._s(s.$t("message.bkchargehours"))+" : ")]),t("div",{staticClass:"li2 fs2 mt-4"},[t("div",{staticClass:"pbo2",class:0==s.hourid?"f0":"f1",attrs:{id:"0"},on:{click:s.selectfee}},[s._v("10"+s._s(s._f("trans")("hors")))]),t("div",{staticClass:"pbo2",class:1==s.hourid?"f0":"f1",attrs:{id:"1"},on:{click:s.selectfee}},[s._v("1 "+s._s(s._f("trans")("hors")))]),t("div",{staticClass:"pbo2",class:2==s.hourid?"f0":"f1",attrs:{id:"2"},on:{click:s.selectfee}},[s._v("2 "+s._s(s._f("trans")("hors")))]),t("div",{staticClass:"pbo2",class:3==s.hourid?"f0":"f1",attrs:{id:"3"},on:{click:s.selectfee}},[s._v("3 "+s._s(s._f("trans")("hors")))])]),t("div",{staticClass:"li2 fs2 mt-4 mb-4"},[t("div",{staticClass:"pbo2",class:4==s.hourid?"f0":"f1",attrs:{id:"4"},on:{click:s.selectfee}},[s._v("4 "+s._s(s._f("trans")("hors")))]),t("div",{staticClass:"pbo2",class:5==s.hourid?"f0":"f1",attrs:{id:"5"},on:{click:s.selectfee}},[s._v("6 "+s._s(s._f("trans")("hors")))]),t("div",{staticClass:"pbo2",class:6==s.hourid?"f0":"f1",attrs:{id:"6"},on:{click:s.selectfee}},[s._v("8 "+s._s(s._f("trans")("hors")))]),t("div",{staticClass:"pbo2",class:7==s.hourid?"f0":"f1",attrs:{id:"7"},on:{click:s.selectfee}},[s._v("15"+s._s(s._f("trans")("hors")))])])])]):s._e()]:s._e(),1==s.contentId?void 0:s._e()],2)])],1)},e=[],c={name:"chargerbk",components:{},mounted(){},computed:{},data(){return{loads:0,disphours:!1,keeploading:!0,mac:void 0,chargerid:this.$route.params.id,portid:-1,noclick:!0,norefresh:!1,vcardbtnclicked:!1,step:0,btntext:"ChargeNOW",myid:-1,isagent:0,mytoken:"",mynickname:"",mybalance:"0.00",mybalnum:0,contentId:0,hourid:parseInt(localStorage.horid)||0,charging:0,loading:!1,prid:2,prizz:["-","-","-","-","-","-"],priz6:[0,30,"8:00","22:00"],thehours:["10","1","2","3","4","6","8","15"],st:["Free","SwitchON","Charging","Disabled","StopDN","Offline","noID"],sw:[0,1,2,3,4,5,0,0,0,0,0,0],se:[0,0,0,0,0,0,0,0,0,0,0,0],pi:[0,0,0,0,0,0,0,0,0,0,0,0],ua:["","","","","","","","","","","",""]}},methods:{async fetchData(){let s=localStorage.getItem("token"),t="token="+s+"&loads="+this.loads;t=this.mac?t+"&mac="+this.mac:t+"&id="+this.chargerid,this.loading=!0;let a=await this.axios.post("/getonebk?tm="+(new Date).getTime(),t);this.loading=!1,a&&a.status>=200&&(this.loads++,0==this.norefresh?(Object.keys(a.data).forEach(s=>{this[s]=a.data[s]}),this.portid>-1&&this.selectport(this.portid)):this.sw[this.portid]!=a.data.sw[this.portid]&&(this.norefresh=!1),this.loads<100?(this.keeploading=!0,setTimeout(this.fetchData,1e3)):this.keeploading=!1)},selectport(s){let t="",a=!0;if(0==this.sw[s])t=this.$t("message.DoCharge")+"(#"+(s+1)+")",a=!1;else if(1==this.sw[s]||2==this.sw[s]){let i=(new Date).getTime(),e=this.se[s]-i;if(e<0)this.myid==s?(t=this.$t("message.StopNOW"),a=!1):t=this.ua[s]+" "+this.$t("message.Charging");else{let i=e/1e3,c=parseInt(i/60),n=parseInt(i%60),l=c+"m"+(n>0?n+"s":"");this.myid==s?(t=c>600?this.$t("message.IamCharging"):l+","+this.$t("message.StopNOW"),a=!1):t=c>600?this.ua[s]:this.ua[s]+"@"+l}}else 3==this.sw[s]?(s=-1,t="PortDisabled"):4==this.sw[s]?(s=-1,t=this.$t("message.StopKeyDown")):5==this.sw[s]?this.myid==s?(t=this.$t("message.Clearme"),a=!1):(s=-1,t=this.$t("message.DeviceOffline")):(s=-1,t=this.$t("message.InvalidChargerID"));this.portid=s,this.btntext=t,this.noclick=a},inputpays(){this.contentId=1},cancelpay(){this.contentId=0,this.vcardbtnclicked=!1},selectme(s){let t=parseInt(s.currentTarget.id);this.selectport(t),this.loads=1,this.keeploading||this.fetchData()},async authen(){let s=localStorage.getItem("token");if(s){let t="token="+s+"&tm="+(new Date).getTime(),a=await this.axios.post("/chargeauth?tm="+(new Date).getTime(),t);if(a&&200==a.status){let t=localStorage.getItem("nickname");this.mytoken=s,this.mynickname=t,this.mybalnum=a.data.balnum,this.mybalance=a.data.balance,this.isagent=a.data.isagent}else localStorage.removeItem("token"),localStorage.removeItem("nickname")}},async showhours(){this.disphours=!0},async closeme(){this.disphours=!1},selectfee(s){this.hourid=parseInt(s.currentTarget.id),localStorage.horid=this.hourid,this.disphours=!1},async dochargebk(){this.noclick=!0,this.norefresh=!0;let s=localStorage.getItem("token"),t="token="+s+"&mac="+this.mac+"&portid="+this.portid+"&hourid="+this.hourid;0==this.sw[this.portid]?(this.btntext=this.$t("message.Starting"),await this.axios.post("/dochargebk?tm="+(new Date).getTime(),t),setTimeout(()=>{this.noclick=!1,this.norefresh=!1},1e4)):this.myid==this.portid&&(this.btntext=this.$t("message.Stoping")+"...",t+="&cmd=1",await this.axios.post("/userdocmd?tm="+(new Date).getTime(),t),setTimeout(()=>{this.noclick=!1,this.norefresh=!1},1e4)),this.loads=1,this.keeploading||this.fetchData()}}},n=c,l=(a("5952"),a("2877")),d=Object(l["a"])(n,i,e,!1,null,null,null);t["default"]=d.exports},5952:function(s,t,a){"use strict";a("b406")},b406:function(s,t,a){}}]);
//# sourceMappingURL=chunk-06483aa9.32f25700.js.map